(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[531],{5966:function(U,M,e){"use strict";var z=e(22122),E=e(81253),D=e(67294),g=e(45114),F=["fieldProps","proFieldProps"],T=["fieldProps","proFieldProps"],y="text",A=function(u){var L=u.fieldProps,j=u.proFieldProps,p=(0,E.Z)(u,F);return D.createElement(g.Z,(0,z.Z)({mode:"edit",valueType:y,fieldProps:L,filedConfig:{valueType:y},proFieldProps:j},p))},v=function(u){var L=u.fieldProps,j=u.proFieldProps,p=(0,E.Z)(u,T);return D.createElement(g.Z,(0,z.Z)({mode:"edit",valueType:"password",fieldProps:L,proFieldProps:j,filedConfig:{valueType:y}},p))},m=A;m.Password=v,m.displayName="ProFormComponent",M.Z=m},34687:function(U){U.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",icon:"icon___rzGKO"}},32384:function(){},12689:function(U,M,e){"use strict";e.r(M),e.d(M,{default:function(){return te}});var z=e(18106),E=e(58634),D=e(34792),g=e(48086),F=e(11849),T=e(3182),y=e(2824),A=e(94043),v=e.n(A),m=e(28991),r=e(67294),u={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},L=u,j=e(27029),p=function(d,h){return r.createElement(j.Z,(0,m.Z)((0,m.Z)({},d),{},{ref:h,icon:L}))};p.displayName="LockOutlined";var $=r.forwardRef(p),H=e(89366),G=e(22122),ae=e(84305),Y=e(39559),X=e(81253),J=e(5894),Q=e(7381),ne=e(32384),k=["logo","message","title","subTitle","actions","children"];function w(c){var d=c.logo,h=c.message,P=c.title,N=c.subTitle,C=c.actions,x=c.children,I=(0,X.Z)(c,k),B=(0,Q.YB)(),K=(0,m.Z)({searchConfig:{submitText:B.getMessage("loginForm.submitText","\u767B\u5F55")},render:function(l,Z){return Z.pop()},submitButtonProps:{size:"large",style:{width:"100%"}}},I.submitter),f=(0,r.useContext)(Y.ZP.ConfigContext),o=f.getPrefixCls("pro-form-login"),t=function(l){return"".concat(o,"-").concat(l)},s=(0,r.useMemo)(function(){return d?typeof d=="string"?r.createElement("img",{src:d}):d:null},[d]);return r.createElement("div",{className:t("container")},r.createElement("div",{className:t("top")},P||s?r.createElement("div",{className:t("header")},s?r.createElement("span",{className:t("logo")},s):null,P?r.createElement("span",{className:t("title")},P):null):null,N?r.createElement("div",{className:t("desc")},N):null),r.createElement("div",{className:t("main")},r.createElement(J.A,(0,G.Z)({isKeyPressSubmit:!0},I,{submitter:K}),h,x),C?r.createElement("div",{className:t("other")},C):null))}var W=e(5966),O=e(21010),q=e(71390),_=e(36571),ee=e(34687),S=e.n(ee),n=e(85893),re=function(){var d=(0,r.useState)("account"),h=(0,y.Z)(d,2),P=h[0],N=h[1],C=(0,O.tT)("@@initialState"),x=C.initialState,I=C.setInitialState,B=function(){var f=(0,T.Z)(v().mark(function o(){var t,s;return v().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,x==null||(t=x.fetchUserInfo)===null||t===void 0?void 0:t.call(x);case 2:if(s=l.sent,!s){l.next=6;break}return l.next=6,I(function(Z){return(0,F.Z)((0,F.Z)({},Z),{},{currentUser:s})});case 6:case"end":return l.stop()}},o)}));return function(){return f.apply(this,arguments)}}(),K=function(){var f=(0,T.Z)(v().mark(function o(t){var s,i,l,Z,R,V,b;return v().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(0,_.x4)((0,F.Z)({},t));case 3:if(s=a.sent,s.code!==200){a.next=16;break}return i="\u767B\u5F55\u6210\u529F\uFF01",g.default.success(i),localStorage.setItem("token",s.data.token),a.next=10,B();case 10:if(O.m8){a.next=12;break}return a.abrupt("return");case 12:return l=O.m8.location.query,Z=l,R=Z.redirect,O.m8.push(R||"/"),a.abrupt("return");case 16:V="\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01",g.default.error(V),console.log(s),a.next=25;break;case 21:a.prev=21,a.t0=a.catch(0),b="\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01",g.default.error(b);case 25:case"end":return a.stop()}},o,null,[[0,21]])}));return function(t){return f.apply(this,arguments)}}();return(0,n.jsxs)("div",{className:S().container,children:[(0,n.jsx)("div",{className:S().content,children:(0,n.jsxs)(w,{logo:(0,n.jsx)("img",{alt:"logo",src:"/logo.png"}),title:"XScan",subTitle:" ",initialValues:{autoLogin:!0},onFinish:function(){var f=(0,T.Z)(v().mark(function o(t){return v().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,K(t);case 2:case"end":return i.stop()}},o)}));return function(o){return f.apply(this,arguments)}}(),children:[(0,n.jsx)(E.Z,{activeKey:P,onChange:N,children:(0,n.jsx)(E.Z.TabPane,{tab:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"},"account")}),P==="account"&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(W.Z,{name:"username",fieldProps:{size:"large",prefix:(0,n.jsx)(H.Z,{className:S().prefixIcon})},placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u7528\u6237\u540D\u662F\u5FC5\u586B\u9879\uFF01"}]}),(0,n.jsx)(W.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,n.jsx)($,{className:S().prefixIcon})},placeholder:"\u5BC6\u7801",rules:[{required:!0,message:"\u5BC6\u7801\u662F\u5FC5\u586B\u9879\uFF01"}]})]})]})}),(0,n.jsx)(q.Z,{})]})},te=re}}]);
