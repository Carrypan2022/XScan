(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[23],{64317:function(X,C,e){"use strict";var Z=e(22122),c=e(28991),p=e(81253),v=e(67294),j=e(45114),s=e(22270),m=e(66758),I=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],l=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],R=v.forwardRef(function(r,H){var D=r.fieldProps,O=r.children,b=r.params,B=r.proFieldProps,W=r.mode,A=r.valueEnum,L=r.request,w=r.showSearch,K=r.options,U=(0,p.Z)(r,I),$=(0,v.useContext)(m.Z);return v.createElement(j.Z,(0,Z.Z)({mode:"edit",valueEnum:(0,s.h)(A),request:L,params:b,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,c.Z)({options:K,mode:W,showSearch:w,getPopupContainer:$.getPopupContainer},D),ref:H,proFieldProps:B},U),O)}),n=v.forwardRef(function(r,H){var D=r.fieldProps,O=r.children,b=r.params,B=r.proFieldProps,W=r.mode,A=r.valueEnum,L=r.request,w=r.options,K=(0,p.Z)(r,l),U=(0,c.Z)({options:w,mode:W||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},D),$=(0,v.useContext)(m.Z);return v.createElement(j.Z,(0,Z.Z)({mode:"edit",valueEnum:(0,s.h)(A),request:L,params:b,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,c.Z)({getPopupContainer:$.getPopupContainer},U),ref:H,proFieldProps:B},K),O)}),u=R,T=n,x=u;x.SearchSelect=T,x.displayName="ProFormComponent",C.Z=x},5966:function(X,C,e){"use strict";var Z=e(22122),c=e(81253),p=e(67294),v=e(45114),j=["fieldProps","proFieldProps"],s=["fieldProps","proFieldProps"],m="text",I=function(u){var T=u.fieldProps,x=u.proFieldProps,r=(0,c.Z)(u,j);return p.createElement(v.Z,(0,Z.Z)({mode:"edit",valueType:m,fieldProps:T,filedConfig:{valueType:m},proFieldProps:x},r))},l=function(u){var T=u.fieldProps,x=u.proFieldProps,r=(0,c.Z)(u,s);return p.createElement(v.Z,(0,Z.Z)({mode:"edit",valueType:"password",fieldProps:T,proFieldProps:x,filedConfig:{valueType:m}},r))},R=I;R.Password=l,R.displayName="ProFormComponent",C.Z=R},16894:function(X,C,e){"use strict";var Z=e(7381),c=e(40280);C.ZP=c.Z},7291:function(X,C,e){"use strict";e.r(C),e.d(C,{default:function(){return ie}});var Z=e(57663),c=e(71577),p=e(2824),v=e(11849),j=e(34792),s=e(48086),m=e(3182),I=e(94043),l=e.n(I),R=e(49101),n=e(67294),u=e(21010),T=e(81907),x=e(85224),r=e(16894),H=e(88983),D=e(47933),O=e(22122),b=e(28991),B=e(81253),W=e(45114),A=e(22270),L=e(64893),w=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],K=n.forwardRef(function(o,E){var h=o.fieldProps,d=o.options,F=o.radioType,G=o.layout,t=o.proFieldProps,z=o.valueEnum,_=(0,B.Z)(o,w);return n.createElement(W.Z,(0,O.Z)({mode:"edit",valueType:F==="button"?"radioButton":"radio",ref:E,valueEnum:(0,A.h)(z,void 0)},_,{fieldProps:(0,b.Z)({options:d,layout:G},h),proFieldProps:t,filedConfig:{customLightMode:!0}}))}),U=n.forwardRef(function(o,E){var h=o.fieldProps,d=o.children;return n.createElement(D.ZP,(0,O.Z)({},h,{ref:E}),d)}),$=(0,L.G)(U,{valuePropName:"checked",ignoreWidth:!0}),Y=$;Y.Group=K,Y.Button=D.ZP.Button,Y.displayName="ProFormComponent";var te=Y,se=e(8890),k=e(5966),le=e(64317),q=e(36571),a=e(85893),ue=function(){var o=(0,m.Z)(l().mark(function E(h){var d,F;return l().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return d=s.default.loading("\u6B63\u5728\u6DFB\u52A0"),t.prev=1,t.next=4,(0,q.Yh)((0,v.Z)({},h));case 4:if(F=t.sent,console.log(F),d(),F.data!=="\u4E0A\u4E00\u4E2A\u4EFB\u52A1\u8FD8\u672A\u5B8C\u6210"){t.next=12;break}return s.default.error("\u4E0A\u4E00\u4E2A\u626B\u63CF\u4EFB\u52A1\u8FD8\u672A\u5B8C\u6210"),t.abrupt("return",!1);case 12:return s.default.success("\u6DFB\u52A0\u6210\u529F"),t.abrupt("return",!0);case 14:t.next=21;break;case 16:return t.prev=16,t.t0=t.catch(1),d(),s.default.error("\u6DFB\u52A0\u5931\u8D25,\u8BF7\u91CD\u8BD5!"),t.abrupt("return",!1);case 21:case"end":return t.stop()}},E,null,[[1,16]])}));return function(h){return o.apply(this,arguments)}}(),ge=null,de=function(){var E=(0,n.useState)("ProForm"),h=(0,p.Z)(E,2),d=h[0],F=h[1],G=(0,n.useState)("ProForm"),t=(0,p.Z)(G,2),z=t[0],_=t[1],ce=(0,n.useState)([]),ae=(0,p.Z)(ce,2),pe=ae[0],ve=ae[1],me=(0,n.useState)(!1),ne=(0,p.Z)(me,2),he=ne[0],ee=ne[1],M=(0,n.useRef)(),fe=(0,n.useState)([]),oe=(0,p.Z)(fe,2),J=oe[0],Pe=oe[1],Ee=[{title:"ID",dataIndex:"id",hideInSearch:!0,editable:!1,width:"7%"},{title:"\u76EE\u6807",editable:!1,dataIndex:"target",ellipsis:!0},{title:"\u5F15\u64CE",dataIndex:"scantool",hideInSearch:!1,valueEnum:{xray:{text:"xray",status:"Success"}},editable:!1},{title:"\u626B\u63CF\u89C4\u5219",hideInSearch:!0,dataIndex:"rule",editable:!1},{title:"\u626B\u63CF\u72B6\u6001",hideInSearch:!0,dataIndex:"scanstatus",valueType:"progress",editable:!1},{title:"\u64CD\u4F5C",valueType:"option",render:function(i,f){return[(0,a.jsx)(c.Z,{disabled:f.scanstatus==="0",type:"primary",danger:!0,onClick:(0,m.Z)(l().mark(function g(){var V,P,S,Q,re;return l().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return console.log(f.id),N.next=3,(0,q.cm)({id:[f.id]});case 3:V=N.sent,V.msg=="\u8BF7\u6C42\u6210\u529F"?(s.default.success("\u5220\u9664\u6210\u529F"),(P=M.current)===null||P===void 0||(S=P.reloadAndRest)===null||S===void 0||S.call(P)):(s.default.error("\u5220\u9664\u5931\u8D25"),(Q=M.current)===null||Q===void 0||(re=Q.reloadAndRest)===null||re===void 0||re.call(Q));case 5:case"end":return N.stop()}},g)})),children:"\u5220\u9664"},"delete")]}}];return(0,a.jsxs)(T.ZP,{ghost:!0,children:[(0,a.jsx)(r.ZP,{actionRef:M,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,a.jsxs)(c.Z,{type:"primary",onClick:function(){ee(!0)},children:[(0,a.jsx)(R.Z,{})," \u65B0\u5EFA"]},"primary")]},request:q.WB,columns:Ee,rowSelection:{onChange:function(i,f){Pe(f)}},editable:{type:"multiple",editableKeys:pe,onSave:function(){var y=(0,m.Z)(l().mark(function f(g,V){return l().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,updatePolicy({id:g,rule:V.rule});case 2:s.default.success("Configuration is successful"),M.current&&M.current.reload();case 4:case"end":return S.stop()}},f)}));function i(f,g){return y.apply(this,arguments)}return i}(),onChange:ve,actionRender:function(i,f,g){return[g.save,g.cancel]}}}),(J==null?void 0:J.length)>0&&(0,a.jsx)(x.Z,{extra:(0,a.jsxs)("div",{children:[(0,a.jsx)(u._H,{id:"pages.searchTable.chosen",defaultMessage:"Chosen"})," ",(0,a.jsx)("a",{style:{fontWeight:600},children:J.length})," ",(0,a.jsx)(u._H,{id:"pages.searchTable.item",defaultMessage:"\u9879"})]})}),(0,a.jsxs)(se.Y,{title:"\u65B0\u5EFA\u626B\u63CF",width:"400px",visible:he,onVisibleChange:ee,onFinish:function(){var y=(0,m.Z)(l().mark(function i(f){var g;return l().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,ue(f);case 2:g=P.sent,g&&(ee(!1),M.current&&M.current.reload());case 4:case"end":return P.stop()}},i)}));return function(i){return y.apply(this,arguments)}}(),children:[(0,a.jsx)(te.Group,{label:"\u626B\u63CF\u76EE\u6807",rules:[{required:!0}],width:"md",name:"task",fieldProps:{value:d,onChange:function(i){return F(i.target.value)}},options:["\u5355\u4E2AURL","\u76EE\u6807\u9879\u76EE"]}),(0,a.jsx)(k.Z,{hidden:d!="\u5355\u4E2AURL",label:"url\u5730\u5740",width:"md",name:"urlname",placeholder:"\u8F93\u5165url"}),(0,a.jsx)(k.Z,{hidden:d!="\u76EE\u6807\u9879\u76EE",label:"\u4EFB\u52A1\u540D\u79F0",width:"md",name:"taskname"}),(0,a.jsx)(le.Z,{name:"scantool",label:"\u626B\u63CF\u5F15\u64CE",valueEnum:{xray:"xray"},width:"md",rules:[{required:!0,message:"\u89C4\u5219\u4E3A\u5FC5\u586B\u9879"}],placeholder:"\u9009\u62E9\u5F15\u64CE"}),(0,a.jsx)(te.Group,{label:"\u89C4\u5219",rules:[{required:!0,message:"\u89C4\u5219\u4E3A\u5FC5\u586B\u9879"}],width:"md",name:"rule",fieldProps:{value:z,onChange:function(i){return _(i.target.value)}},options:["\u52A0\u8F7D\u6240\u6709\u89C4\u5219"]}),(0,a.jsx)(k.Z,{hidden:z!="\u5355\u4E2A\u89C4\u5219",label:"\u5355\u4E2A\u89C4\u5219",width:"md",placeholder:"zabbix-default-password.yml",name:"onerule"})]})]})},ie=de}}]);
