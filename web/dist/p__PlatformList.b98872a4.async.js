(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[883],{32779:function(Pe,F,n){"use strict";n.r(F),n.d(F,{default:function(){return fe}});var Ve=n(34792),W=n(48086),H=n(3182),U=n(2824),z=n(94043),I=n.n(z),Q=n(81907),t=n(67294),$e=n(9715),X=n(22712),be=n(57663),Y=n(71577),$=n(22122),k=n(96156),p=n(28481),j=n(81253),q=n(87757),L=n.n(q),_=n(92137),x=n(28991),ee=n(21770),ne=n(49101),te=n(26369),w=n(22270),ae=n(48171),le=n(60249),re=n(66646),oe=n(40280),ie=n(97462),de=n(88306),ue=["onTableChange","maxLength","formItemProps","recordCreatorProps","rowKey","controlled","defaultValue","onChange"],ve=["record","position","creatorButtonText","newRecordType","parentKey"],D=t.createContext(void 0);function M(e){var i=e.children,R=e.record,g=e.position,b=e.newRecordType,y=e.parentKey,u=(0,t.useContext)(D);return t.cloneElement(i,(0,x.Z)((0,x.Z)({},i.props),{},{onClick:function(){var E=(0,_.Z)(L().mark(function f(v){var h,o,Z,K;return L().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(h=(o=i.props).onClick)===null||h===void 0?void 0:h.call(o,v);case 2:if(K=a.sent,K!==!1){a.next=5;break}return a.abrupt("return");case 5:u==null||(Z=u.current)===null||Z===void 0||Z.addEditRecord(R,{position:g,newRecordType:b,parentKey:y});case 6:case"end":return a.stop()}},f)}));function m(f){return E.apply(this,arguments)}return m}()}))}function A(e){var i,R=e.onTableChange,g=e.maxLength,b=e.formItemProps,y=e.recordCreatorProps,u=e.rowKey,E=e.controlled,m=e.defaultValue,f=e.onChange,v=(0,j.Z)(e,ue),h=(0,te.Z)(e.value),o=(0,t.useRef)(),Z=(0,t.useRef)();(0,t.useImperativeHandle)(v.actionRef,function(){return o.current});var K=(0,ee.Z)(function(){return e.value||m||[]},{value:e.value,onChange:e.onChange}),S=(0,p.Z)(K,2),a=S[0],me=S[1],he=t.useMemo(function(){return typeof u=="function"?u:function(s,l){return s[u]||l}},[u]);(0,t.useEffect)(function(){!e.controlled||a.forEach(function(s,l){var r;(r=Z.current)===null||r===void 0||r.setFieldsValue((0,k.Z)({},he(s,l),s))},{})},[a,e.controlled]);var T=y||{},ge=T.record,O=T.position,ye=T.creatorButtonText,Ce=T.newRecordType,Re=T.parentKey,Ee=(0,j.Z)(T,ve),G=O==="top",P=(0,t.useMemo)(function(){return g&&g<=(a==null?void 0:a.length)?!1:y!==!1&&t.createElement(M,{record:(0,w.h)(ge,a==null?void 0:a.length,a)||{},position:O,parentKey:(0,w.h)(Re,a==null?void 0:a.length,a),newRecordType:Ce},t.createElement(Y.Z,(0,$.Z)({type:"dashed",style:{display:"block",margin:"10px 0",width:"100%"},icon:t.createElement(ne.Z,null)},Ee),ye||"\u6DFB\u52A0\u4E00\u884C\u6570\u636E"))},[y,g,a==null?void 0:a.length]),Ze=(0,t.useMemo)(function(){return P?G?{components:{header:{wrapper:function(l){var r,d=l.className,c=l.children;return t.createElement("thead",{className:d},c,t.createElement("tr",{style:{position:"relative"}},t.createElement("td",{colSpan:0,style:{visibility:"hidden"}},P),t.createElement("td",{style:{position:"absolute",left:0,width:"100%"},colSpan:(r=v.columns)===null||r===void 0?void 0:r.length},P)))}}}}:{tableViewRender:function(l,r){var d,c;return t.createElement(t.Fragment,null,(d=(c=e.tableViewRender)===null||c===void 0?void 0:c.call(e,l,r))!==null&&d!==void 0?d:r,P)}}:{}},[G,P]),J=(0,x.Z)({},e.editable),Te=(0,ae.J)(function(s,l){var r,d,c;if((r=e.editable)===null||r===void 0||(d=r.onValuesChange)===null||d===void 0||d.call(r,s,l),(c=e.onValuesChange)===null||c===void 0||c.call(e,l,s),e.controlled){var V;e==null||(V=e.onChange)===null||V===void 0||V.call(e,l)}});return((e==null?void 0:e.onValuesChange)||((i=e.editable)===null||i===void 0?void 0:i.onValuesChange)||e.controlled&&(e==null?void 0:e.onChange))&&(J.onValuesChange=Te),t.createElement(t.Fragment,null,t.createElement(D.Provider,{value:o},t.createElement(oe.Z,(0,$.Z)({search:!1,options:!1,pagination:!1,rowKey:u,revalidateOnFocus:!1},v,Ze,{tableLayout:"fixed",actionRef:o,onChange:R,editable:(0,x.Z)((0,x.Z)({},J),{},{formProps:{formRef:Z}}),dataSource:a,onDataSourceChange:function(l){me(l)}}))),e.name?t.createElement(ie.Z,{name:[e.name]},function(s){var l,r,d=(0,de.Z)(s,[e.name].flat(1)),c=d==null?void 0:d.find(function(V,xe){return!(0,le.Z)(V,h==null?void 0:h[xe])});return c&&(e==null||(l=e.editable)===null||l===void 0||(r=l.onValuesChange)===null||r===void 0||r.call(l,c,d)),null}):null)}function B(e){return e.name?t.createElement(X.Z.Item,(0,$.Z)({style:{maxWidth:"100%"}},e==null?void 0:e.formItemProps,{name:e.name}),t.createElement(t.Fragment,null,t.createElement(re.gN,{shouldUpdate:!0,name:e.name,isList:!0},function(i){return i.value===void 0||!Array.isArray(i.value)?null:t.createElement(A,(0,$.Z)({},e,{value:i.value,onChange:i.onChange}))}))):t.createElement(A,e)}B.RecordCreator=M;var se=B,N=n(36571),C=n(85893),ce=function(){var i=(0,t.useState)([]),R=(0,U.Z)(i,2),g=R[0],b=R[1];(0,t.useState)("hidden");var y=[{title:"\u5E73\u53F0\u540D\u79F0",dataIndex:"platform",editable:!1,width:"15%"},{title:"\u8D26\u53F7",dataIndex:"username",width:"25%"},{title:"\u5BC6\u7801",dataIndex:"password"},{title:"\u64CD\u4F5C",valueType:"option",width:200,render:function(E,m,f,v){return[(0,C.jsx)("a",{onClick:function(){var o;v==null||(o=v.startEditable)===null||o===void 0||o.call(v,m.id)},children:"\u7F16\u8F91"},"editable")]}}];return(0,C.jsx)(Q.ZP,{children:(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(se,{rowKey:"id",headerTitle:(0,C.jsx)("hr",{}),recordCreatorProps:!1,request:N.Jv,columns:y,editable:{type:"multiple",editableKeys:g,onSave:function(){var u=(0,H.Z)(I().mark(function m(f,v){return I().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,N.ES)({id:f,username:v.username,password:v.password});case 2:W.default.success("Configuration is successful");case 3:case"end":return o.stop()}},m)}));function E(m,f){return u.apply(this,arguments)}return E}(),onChange:b,actionRender:function(E,m,f){return[f.save,f.cancel]}}})})})},fe=ce}}]);
